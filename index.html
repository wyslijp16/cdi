<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDI de l'Ékip technique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            padding-top: 100px;
        }
        .card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .active-button {
            background-color: #4338ca;
        }
        .floating-header {
            position: fixed;
            top: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            min-width: 590px;
            max-width: 90%;
            text-align: center;
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-indigo-700 text-white p-5 shadow-lg rounded-full floating-header transition-all duration-300 ease-in-out">
        <h1 class="text-2xl font-bold">CDI de l'Ékip technique</h1>
        <p class="mt-2 text-base font-light hidden md:block">Le centre de ressources pour les militantes et militants de LFI</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <div class="flex flex-wrap justify-center gap-4 mb-8">
            <button id="btn-petitions" class="btn bg-indigo-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">Pétitions</button>
            <button id="btn-comptes-utiles" class="btn bg-indigo-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">Comptes utiles</button>
            <button id="btn-sites-utiles" class="btn bg-indigo-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">Sites utiles</button>
            <button id="btn-ouvrages" class="btn bg-indigo-600 text-white font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-indigo-700 transition-colors">Ouvrages</button>
        </div>

        <div id="controls-container" class="hidden">
            <div id="search-container" class="mb-4">
                <input type="text" id="search-input" placeholder="Rechercher..." class="w-full p-3 rounded-full border-2 border-gray-300 focus:outline-none focus:border-indigo-500 transition-colors">
            </div>

            <div id="filters-container" class="flex flex-wrap gap-4 mb-8">
                </div>
        </div>

        <div id="content-container" class="grid grid-cols-1 gap-6">
            <div class="col-span-full text-center text-gray-500 text-xl mt-12">
                <p>Sélectionnez une catégorie ci-dessus pour afficher les ressources.</p>
            </div>
        </div>

    </main>

    <footer class="bg-indigo-900 text-white p-6 mt-8 rounded-t-xl text-center">
        <p>© 2024 Ékip technique. Tous droits réservés.</p>
    </footer>

    <script>
        const contentData = {
            petitions: [
                { title: "Pétition pour la 6ème République", description: "Cette pétition vise à la convocation d'une Assemblée constituante pour la 6e République.", url: "https://petitions.assemblee-nationale.fr/initiatives/i-2793", platform: "petitions.assemblee-nationale.fr", struggle: "Politique" },
                { title: "Non à la Loi Duplomb — Pour la santé, la sécurité, l’intelligence collective.", description: "La Loi Duplomb est une aberration scientifique, éthique, environnementale et sanitaire. Elle représente une attaque frontale contre la santé publique, la biodiversité, la cohérence des politiques climatiques, la sécurité alimentaire, et le bon sens.", url: "https://petitions.assemblee-nationale.fr/initiatives/i-3014", platform: "petitions.assemblee-nationale.fr", struggle: "Santé" },
                { title: "Budget : les sacrifices pour le monde du travail ça suffit !", description: "Pas question que ce soient encore les travailleuses et travailleurs, les demandeurs d’emploi, les jeunes et les retraité·es qui payent la facture, à la fois financièrement, mais aussi dans une flexibilité encore intensifiée !", url: "https://www.change.org/p/budget-les-sacrifices-pour-le-monde-du-travail-%C3%A7a-suffit", platform: "Change.org", struggle: "Social" },
            ],
            "comptes-utiles": [
                { title: "La France insoumise", description: "Le compte officiel du mouvement sur X (Twitter).", url: "https://twitter.com/FranceInsoumise", network: "Twitter" },
                { title: "Jean-Luc Mélenchon", description: "Le compte personnel de Jean-Luc Mélenchon sur X.", url: "https://twitter.com/JLMelenchon", network: "Twitter" },
                { title: "LFI sur Facebook", description: "Suivez l'actualité du mouvement sur la page officielle.", url: "https://www.facebook.com/lafranceinsoumise", network: "Facebook" },
                { title: "Le Média TV", description: "La chaîne YouTube pour des analyses et des reportages engagés.", url: "https://www.youtube.com/@lemediatv", network: "YouTube" },
                { title: "Avenir en Commun", description: "La page Facebook pour l'actualité et les événements du programme.", url: "https://www.facebook.com/avenir.en.commun", network: "Facebook" },
            ],
            "sites-utiles": [
                { title: "Le site officiel de LFI", description: "Accédez à toutes les informations, aux programmes et aux actualités.", url: "https://lafranceinsoumise.fr", type: "Site officiel" },
                { title: "Le Blog de Jean-Luc Mélenchon", description: "Retrouvez les analyses et les tribunes du leader de LFI.", url: "https://melenchon.fr", type: "Blog personnel" },
                { title: "L'insoumission.fr", description: "Le journal des insoumis pour une information alternative.", url: "https://linsoumission.fr", type: "Journal" },
                { title: "Programme l'Avenir en Commun", description: "Consultez le programme pour l'élection présidentielle de 2022.", url: "https://lafranceinsoumise.fr/programme/", type: "Programme officiel" },
                { title: "Le Dépêche", description: "Analyses de l'actualité sociale et politique.", url: "https://www.ledepache.fr", type: "Journal" },
                { title: "Politis", description: "Journal d'actualités et d'enquêtes.", url: "https://www.politis.fr", type: "Journal" },
                { title: "Mediapart", description: "Média d'investigation indépendant.", url: "https://www.mediapart.fr", type: "Journal" }
            ],
            ouvrages: [
                { title: "L'Ère du peuple", description: "Livre de Jean-Luc Mélenchon analysant la crise politique actuelle.", url: "https://www.placedeslibraires.fr/livre/9782749925327-l-ere-du-peuple-jean-luc-melenchon/", publisher: "Éditions du Seuil" },
                { title: "Révolution", description: "Le programme complet de LFI pour la transformation de la société française.", url: "https://lafranceinsoumise.fr/programme/", publisher: "Éditions du Détour" },
                { title: "Le Choix de l'insoumission", description: "Un recueil d'articles et d'analyses pour comprendre le mouvement.", url: "https://www.amazon.fr/choix-linsoumission-Jean-Luc-Melenchon/dp/2377221379", publisher: "Éditions du Seuil" },
                { title: "La Gauche des faits", description: "Un ouvrage collectif pour déconstruire les mythes de l'économie néolibérale.", url: "https://www.placedeslibraires.fr/livre/9782707198188-la-gauche-des-faits-collectif/", publisher: "La Découverte" },
                { title: "L'insurrection qui vient", description: "Réflexion sur la crise de la modernité et les formes de résistance.", url: "https://www.placedeslibraires.fr/livre/9782020986961-l-insurrection-qui-vient-comite-invisible/", publisher: "La Fabrique" },
                { title: "Pour un matérialisme historique", description: "Essai de Louis Althusser sur la théorie marxiste.", url: "https://www.placedeslibraires.fr/livre/9782707153675-pour-un-materialisme-historique-louis-althusser/", publisher: "La Découverte" }
            ]
        };

        const contentContainer = document.getElementById('content-container');
        const controlsContainer = document.getElementById('controls-container');
        const searchInput = document.getElementById('search-input');
        const filtersContainer = document.getElementById('filters-container');
        const categoryButtons = document.querySelectorAll('.btn');

        let currentCategory = null;

        function createCard(item, filterProperties) {
            const card = document.createElement('a');
            card.href = item.url;
            card.target = "_blank";
            card.className = "card block bg-white rounded-lg shadow-md flex p-6";

            filterProperties.forEach(prop => {
                if (item[prop]) {
                    card.setAttribute(`data-${prop}`, item[prop].toLowerCase());
                }
            });

            const mainContent = document.createElement('div');
            mainContent.className = "flex-1 pr-4";
            mainContent.innerHTML = `
                <h3 class="text-xl font-semibold text-indigo-800 mb-2">${item.title}</h3>
                <p class="text-gray-600">${item.description}</p>
            `;
            card.appendChild(mainContent);

            const separator = document.createElement('div');
            separator.className = "w-px bg-gray-200 h-auto mx-4";
            card.appendChild(separator);

            const characteristics = document.createElement('div');
            characteristics.className = "w-1/4 min-w-max text-right text-sm text-gray-500 flex-none";
            const characteristicsHtml = filterProperties.filter(prop => item[prop]).map(prop => `
                <div>
                    <span class="font-medium">${prop.charAt(0).toUpperCase() + prop.slice(1)}</span> : ${item[prop]}
                </div>
            `).join('');
            characteristics.innerHTML = characteristicsHtml;
            card.appendChild(characteristics);
            
            return card;
        }

        function renderCategory(categoryKey) {
            contentContainer.innerHTML = '';
            filtersContainer.innerHTML = '';
            controlsContainer.classList.remove('hidden');
            currentCategory = categoryKey;
            
            searchInput.value = '';

            const items = contentData[categoryKey];
            if (!items) return;

            const filterProperties = Object.keys(items.length > 0 ? items[0] : {}).filter(key => ['platform', 'struggle', 'network', 'type', 'publisher'].includes(key));
            
            filterProperties.forEach(prop => {
                const uniqueFilters = [...new Set(items.map(item => item[prop]))].sort();
                
                const filterGroup = document.createElement('div');
                filterGroup.className = 'flex flex-col';
                
                const filterLabel = document.createElement('label');
                filterLabel.className = 'font-semibold text-gray-700 mb-1 text-sm';
                filterLabel.textContent = prop.charAt(0).toUpperCase() + prop.slice(1);
                filterGroup.appendChild(filterLabel);
                
                const filterSelect = document.createElement('select');
                filterSelect.className = 'p-2 rounded-lg border-2 border-gray-300 focus:outline-none focus:border-indigo-500 transition-colors';
                filterSelect.setAttribute('data-filter-property', prop);
                filterSelect.addEventListener('change', filterContent);

                const allOption = document.createElement('option');
                allOption.value = 'all';
                allOption.textContent = 'Tous';
                filterSelect.appendChild(allOption);

                uniqueFilters.forEach(filterValue => {
                    const option = document.createElement('option');
                    option.value = filterValue.toLowerCase();
                    option.textContent = filterValue;
                    filterSelect.appendChild(option);
                });

                filterGroup.appendChild(filterSelect);
                filtersContainer.appendChild(filterGroup);
            });

            items.forEach(item => {
                contentContainer.appendChild(createCard(item, filterProperties));
            });
        }

        function filterContent() {
            const searchTerm = searchInput.value.toLowerCase();
            const cards = contentContainer.querySelectorAll('.card');
            const filterSelects = filtersContainer.querySelectorAll('select');
            
            cards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                
                const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                
                let matchesFilters = true;
                filterSelects.forEach(select => {
                    const prop = select.getAttribute('data-filter-property');
                    const filterValue = select.value;

                    if (filterValue !== 'all') {
                        const cardFilterValue = card.getAttribute(`data-${prop}`);
                        if (!cardFilterValue || cardFilterValue !== filterValue) {
                            matchesFilters = false;
                        }
                    }
                });
                
                if (matchesSearch && matchesFilters) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                categoryButtons.forEach(btn => btn.classList.remove('active-button'));
                button.classList.add('active-button');
                
                const categoryKey = button.id.replace('btn-', '');
                renderCategory(categoryKey);
            });
        });

        searchInput.addEventListener('keyup', filterContent);
    </script>
</body>
</html>